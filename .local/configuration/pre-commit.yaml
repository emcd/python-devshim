# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
- repo: https://github.com/pre-commit/pre-commit-hooks
  rev: v4.3.0
  hooks:
  - id: check-added-large-files
  - id: check-ast
    fail_fast: true
  - id: check-case-conflict
  - id: check-docstring-first
  - id: check-json
  - id: check-merge-conflict
  - id: check-symlinks
  - id: check-toml
  - id: check-yaml
  - id: check-vcs-permalinks
  - id: debug-statements
  - id: destroyed-symlinks
  - id: detect-private-key
  - id: mixed-line-ending
    args: [ '--fix', 'no' ]
# TODO? yapf
- repo: local
  hooks:
  - id: pylint
    name: pylint
    stages: [ 'push' ]
    fail_fast: true
    language: system
    types: [ 'python' ]
    entry: 'pylint --report no --score no'
- repo: https://github.com/returntocorp/semgrep
  rev: v0.122.0
  hooks:
  - id: semgrep
    name: semgrep
    stages: [ 'push' ]
    fail_fast: true
    types: [ 'python' ]
    args:
      - '--config'
      - 'scm-modules/semgrep-rules/python/lang'
      - '--error'
      - '--use-git-ignore'
- repo: https://github.com/pre-commit/mirrors-mypy
  rev: v0.982
  hooks:
  - id: mypy
    stages: [ 'push' ]
    fail_fast: true
- repo: https://github.com/PyCQA/bandit
  rev: 'd9fe642e01866e460454641bcd14b9de9d2b1478'
  hooks:
  - id: bandit
    additional_dependencies: [ 'tomli' ]
    stages: [ 'push' ]
    fail_fast: true
    args: [ '--recursive', '--verbose', '--configfile', 'pyproject.toml' ]
- repo: local
  hooks:
  - id: pytest
    name: pytest
    stages: [ 'push' ]
    always_run: true
    pass_filenames: false
    language: system
    entry: 'env HYPOTHESIS_STORAGE_DIRECTORY=.local/caches/hypothesis PYTHONUNBUFFERED=TRUE pytest'
